 <div id="editor-app"></div>

<% content_for :head do %>
  <script>
    window.Locomotive.data = {
      site: {
        sectionsContent:  <%= h static_sections_content_to_json(current_site, @static_section_types, @section_definitions) %>,
        staticSections:   <%= h @static_section_types.to_json.html_safe %>
      },
      page: {
        title: "<%= @page.title %>",
        sectionsContent: [] // TODO
      },
      sectionDefinitions: <%= h @section_definitions.to_json.html_safe %>,
    }

    window.Locomotive.urls = {
      base:         "<%= edit_page_content_path(current_site, @page) %>",
      save:         "<%= page_content_path(current_site, @page, format: :json) %>",
      preview:      "<%= @preview_path %>"
    }

    window.Locomotive.i18n = {
      success:  "<%= h t('flash.locomotive.pages.update.notice') %>",
      fail:     "<%= h t('flash.locomotive.pages.update.alert') %>"
    }

  </script>

  <%= javascript_include_tag  'locomotive/content_editing' %>
  <%= stylesheet_link_tag     'locomotive/content_editing', media: 'screen' %>
<% end %>
